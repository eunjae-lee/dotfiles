name: "Zsh Setup"
description: "Set up Zsh with Oh My Zsh, spaceship theme, and plugins"

# Configuration that gets merged into config.yml
config:
  zsh:
    oh_my_zsh: true
    theme: "spaceship"
    plugins:
      - zsh-z
    
    dotfiles:
      - source: "~/workspace/dotfiles/.zshrc"
        target: "~/.zshrc"
      - source: "~/workspace/dotfiles/.zprofile"
        target: "~/.zprofile"

# Commands to execute
up:
  - name: "Enable interactive comments in zsh"
    command: "setopt interactive_comments"
    
  - name: "Install Oh My Zsh"
    command: 'test -d ~/.oh-my-zsh || sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)" "" --unattended'
    
  - name: "Install spaceship prompt theme"
    command: 'test -d "$ZSH_CUSTOM/themes/spaceship-prompt" || git clone https://github.com/spaceship-prompt/spaceship-prompt.git "$ZSH_CUSTOM/themes/spaceship-prompt" --depth=1'
    
  - name: "Link spaceship theme"
    command: 'ln -sf "$ZSH_CUSTOM/themes/spaceship-prompt/spaceship.zsh-theme" "$ZSH_CUSTOM/themes/spaceship.zsh-theme"'
    
  - name: "Install zsh-z plugin"
    command: 'test -d $ZSH_CUSTOM/plugins/zsh-z || git clone https://github.com/agkozak/zsh-z $ZSH_CUSTOM/plugins/zsh-z'
    
  - name: "Symlink zsh configuration files"
    command: "rm -f ~/.zshrc ~/.zprofile && ln -sf ~/workspace/dotfiles/.zshrc ~/.zshrc && ln -sf ~/workspace/dotfiles/.zprofile ~/.zprofile"
